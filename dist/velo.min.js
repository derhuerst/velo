// velo | Jannis R | v0.2.0

!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.velo=t()}}(function(){return function t(i,n,e){function r(s,o){if(!n[s]){if(!i[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(h)return h(s,!0);var a=Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var l=n[s]={exports:{}};i[s][0].call(l.exports,function(t){var n=i[s][1][t];return r(n?n:t)},l,l.exports,t,i,n,e)}return n[s].exports}for(var h="function"==typeof require&&require,s=0;e.length>s;s++)r(e[s]);return r}({1:[function(t,i,n){"strict mode";var e=n.noop=function(){},r=n.inherit=Object.create,h=Math.round,s=function(t,i){for(key in i)void 0!==i[key]&&(t[key]=i[key]);return t},o=n.array={add:function(t,i){o.has(t,i)||t.push(i)},remove:function(t,i,n){(n=t.indexOf(i)>=0)&&t.splice(n,1)},has:function(t,i){return t.indexOf(i)>=0},foreach:function(t,i,n,e){for(arguments=o.slice(t,2),n=0,e=t.length;e>n;n++)t[n]&&t[n][i].apply(t[n],arguments)},slice:function(t,i,n){return Array.prototype.slice.call(t,i,n)}},u=n.Vector={init:function(t,i){return this.x=t||0,this.y=i||0,this},reset:function(){return this.x=this.y=0,this},add:function(t,i){return arguments.length>=2?(this.x+=t,this.y+=i):1===arguments.length&&arguments[0]&&(this.x+=t.x,this.y+=t.y),this},rotate:function(t){if(0!==t){var i=this.x,n=this.y;this.x=i*Math.cos(t)-n*Math.sin(t),this.y=i*Math.sin(t)+n*Math.cos(t)}return this},equals:function(t,i){return null!==i?this.x===t.x&&this.y===t.y:this.x===t&&this.y===i},clone:function(){return a(this.x,this.y)}},a=n.v=function(t,i){return r(u).init(t,i)},l=n.Node={init:function(t){t=t||{};var i=this;return i.parent(t.parent),i._p=t.position||a(),i._r=t.rotation||0,i.children=Array(t.children||0),i._aP=a(0,0),i._aR=0,i._u(),i},parent:function(t){return t?(this._pn=t,this._rn=t._rn,this._u(),this):this._pn},position:function(t,i){return t?(i===!0?this._p.add(t):this._p=t,this._u(),this):this._p},rotation:function(t,i){return t||0===t?(i===!0?this._r+=t:this._r=t,this._u(),this):this._r},_u:function(){var t=this;t._pn&&t._p&&(t._aP=t._p.clone().rotate(t._pn._aR).add(t._pn._aP),t._aR=t._pn._aR+t._r,o.foreach(t.children,"_u"))}},c=(n.n=function(t){return r(l).init(t)},n.Canvas=s(r(l),{init:function(t){if(l.init.call(this),this._rn=this,!t)throw Error("No HTMLCanvasElement given.");return this.element=t,this.context=t.getContext("2d"),this},clear:function(){this.context.clearRect(0,0,this.element.width,this.element.height)},draw:function(){o.foreach(this.children,"draw")}})),f=(n.c=function(t){return r(c).init(t)},n.Shape=s(r(l),{init:function(t){t=t||{};var i=this;return l.init.call(i,t),i.fillColor=t.fillColor||"gray",i.strokeColor=t.strokeColor||"black",i.lineWidth=0===t.lineWidth?0:t.lineWidth||0,i},draw:function(){var t=this._rn.context;t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.lineWidth}})),_=n.RenderingInterval={init:function(t){return this.callback=t||e,this.running=!1,this},start:function(){return this.running=!0,this._queue(),this},stop:function(){return this.running=!1,this},_call:function(){this.running&&(this.callback(),this._queue())},_queue:function(){requestAnimationFrame(this._call.bind(this))}},d=(n.ri=function(t){return r(_).init(t)},n.Interval=s(r(_),{init:function(t,i){_.init.call(this,t),this.interval=i},_queue:function(){setTimeout(this._call.bind(this),this.interval)}})),v=(n.i=function(t,i){return r(d).init(t,i)},n.Transition={init:function(t,i,n){var e=this;e.finished=!1,e._n=t,e._p=i,e._oP={},e._f={};for(var r in e._p)"function"==typeof e._n[r]?(e._oP[r]=e._n[r](),e._f[r]=!0):(e._oP[r]=e._n[r],e._f[r]=!1);return n=n||{},e._d=n.duration||1e3,e._e=n.easing||p.linear,e._s=n.start||Date.now(),e},update:function(){var t=this;if(!t.finished){var i=Date.now()-t._s;if(!(0>i))return i>t._d?t.finish():(t._a(t._e(i/t._d)),t)}},finish:function(){return this._a(1),this.finished=!0,this},_a:function(t){var i,n=this;for(i in n._p)value=n._oP[i]+n._p[i]*t,n._f[i]?n._n[i](value):n._n[i]=value}}),p=(n.a=function(t,i,n){return r(v).init(t,i,n)},n.easing={});p.linear=function(t){return t};{var y=n.Polygon=s(r(f),{init:function(t){return t=t||{},f.init.call(this,t),this._v=this.vertices=Array(t.vertices),this},draw:function(){var t,i,n,e=this,r=e._rn.context;for(f.draw.call(e),r.beginPath(),i=0,n=e._v.length;n>i;i++)t=e._v[i].clone().rotate(e._aR).add(e._aP),r[0===i?"moveTo":"lineTo"](h(t.x),h(t.y));r.closePath(),r.fill(),e.lineWidth>0&&r.stroke(),o.foreach(this.children,"draw")}}),w=(n.p=function(t){return r(y).init(t)},n.Rectangle=s(r(y),{init:function(t){t=t||{};var i=this;return y.init.call(i,t),i._w=null!==t.width?t.width:60,i._h=null!==t.height?t.height:40,delete i.vertices,i._v=[a(0,0),a(i._w,0),a(i._w,i._h),a(0,i._h)],i},width:function(t){return null!==t?(this._w=t,this._v[1].x=this._v[2].x=this._w,this):this._w},height:function(t){return null!==t?(this._h=t,this._v[2].y=this._v[3].y=this._h,this):this._h}})),g=(n.r=function(t){return r(w).init(t)},n.Ellipse=s(r(f),{init:function(t){return t=t||{},f.init.call(this,t),this.width=null!==t.width?t.width:60,this.height=null!==t.height?t.height:40,this},draw:function(){f.draw.call(this);var t=this,i=t._rn.context;i.save(),f.draw.call(t),i.translate(h(t._aP.x),h(t._aP.y)),i.rotate(t._aR),i.scale(1,t.height/t.width),i.beginPath(),i.arc(0,0,h(t.width/2),0,2*Math.PI),i.closePath(),i.fill(),t.lineWidth>0&&i.stroke(),i.restore(),o.foreach(this.children,"draw")}})),x=(n.e=function(t){return r(g).init(t)},n.Square=s(r(y),{init:function(t){t=t||{};var i=this;return y.init.call(i,t),i._s=null!==t.size?t.size:2,delete i.vertices,i._v=[a(0,0),a(i._s,0),a(i._s,i._s),a(0,i._s)],i},size:function(t){return null!==t?(this._w=t,this._v[1].x=this._v[2].x=this._v[2].y=this._v[3].y=this._s,this):this._w}})),P=(n.sq=function(t){return r(x).init(t)},n.Circle=s(r(f),{init:function(t){return t=t||{},f.init.call(this,t),this.radius=null!==t.radius?t.radius:50,this},draw:function(){f.draw.call(this);var t=this,i=t._rn.context;f.draw.call(t),i.beginPath(),i.arc(h(t._aP.x),h(t._aP.y),h(t.radius),0,2*Math.PI),i.closePath(),i.fill(),t.lineWidth>0&&i.stroke(),o.foreach(this.children,"draw")}}));n.cl=function(t){return r(P).init(t)}}},{}]},{},[1])(1)});